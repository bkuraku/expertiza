<%= error_messages_for 'questionnaire' %>

<!--[form:questionnaire]-->
<table>
  <tr>
    <td valign="top"><label for="questionnaire_name">Name:</label>	</td>
    <td>
      <%= text_field 'questionnaire', 'name'  %>
      <%= hidden_field 'questionnaire', 'id' %>
      <%= hidden_field 'questionnaire', 'type' %>
    </td>
  </tr>
</table>

<table>
  <tr>
    <td>Min question score:</td>
    <td><%= text_field 'questionnaire', 'min_question_score', :size=> 1 %>&nbsp;&nbsp;</td>
    <td>Max question score:</td>
    <td><%= text_field 'questionnaire', 'max_question_score', :size=> 1 %>&nbsp;&nbsp;</td>
    <td>Is this <%= @questionnaire.display_type %> private:</td>
    <td><%= select(:questionnaire, :private, [ ['no', false],
                                               ['yes',  true]])%>
    </td>
  </tr>
</table>

<br/>
<table id="questions_table">
  <tr>
    <td colspan=2 style="padding-bottom: 5pt"><strong>Questions</strong>
      <input style="margin-left: 50pt" type="button" value="Add" onclick="addQuestions()">
      <input id="numQuestionsToAdd" type="text" value="1" size=1>
      more question(s)</td>
    <td colspan=2><input type="button" value="Delete selected questions" onclick="deleteQuestions()"></td>
  </tr>
  <tr>
    <td align=left width=30>Delete</td>
    <td align=center width=300>Question</td>
    <td align=right width=100>Scoring</td>
    <td align=right>Weight</td>
  </tr>

  <% 	i = 1;
         for @question in @questionnaire.questions %>
      <tr>
        <td colspan="4">
          <table>
            <tr>
              <td align=center><input type=checkbox id="question_chk<%= i %>"></td>
              <td><%= text_field "question[]", 'txt', :size=>50 %></td>
              <td><%= select("question[]",:question_type,Question::GRADING_TYPES,{},:onchange => 'handleQuestionType(this)','data-id' => @question.id )%></td>
              <td><%= select("question[]", :weight, Question::WEIGHTS) %></td>
            </tr>
            <tr data-type= <%=@question.question_type%>>
              <td  colspan= 4>
                <%if @question.question_type == "checkbox"%>
                    <%options = QuestionOption.find_all_by_questions_id(@question.id) %>
                    <table style="padding-left: 30px">
                      <tr>
                        <td colspan=4 align="right">
                          <input type="button" value="Add Option" data-questionid='<%=@question.id%>' onclick="addCheckboxOption(this);">
                          <input type="button" value="Delete Selected" data-questionid='<%=@question.id%>' onclick="deleteCheckboxOption(this);">
                        </td>
                      </tr>
                      <%for option in options%>
                          <tr>
                            <td>
                              Option for Checkbox:
                            </td>
                            <td>
                              <input size=45 id='checkbox_option_<%=option.id%>_option_text' type='text' value='<%=option.option_text%>' name=checkbox_option[<%=@question.id%>][<%=option.id%>][option_text] >
                            </td>
                            <td>
                              <input type="checkbox">
                            </td>
                          </tr>
                      <%end%>
                    </table>
                <% end %>
                <%if @question.question_type == "radio"%>
                    <%options = QuestionOption.find_all_by_questions_id(@question.id) %>
                    <table style="padding-left: 30px">
                      <tr>
                        <td colspan="4" align="right">
                          <input type="button" value="Add Option" data-questionid='<%=@question.id%>' onclick="addRadioOption(this);">
                          <input type="button" value="Delete Selected" data-questionid='<%=@question.id%>' onclick="deleteRadioOption(this);">
                        </td>
                      </tr>
                      <%for option in options%>
                          <tr>
                            <td>
                              Option for Radio Button:
                            </td>
                            <td>
                              <input size=45 id='radio_option_<%=option.id%>_option_text' type='text' value='<%=option.option_text%>' name=radio_option[<%=@question.id%>][<%=option.id%>][option_text] >
                            </td>
                            <td>
                              <input type="checkbox">
                            </td>
                          </tr>
                      <%end%>
                    </table>
                <% end %>
              </td>
            </tr>
          </table>
        </td>
      </tr>

  <% 	i += 1;
         end %>
</table>
<BR/>
<!--[eoform:course]-->

